CentOS配置文件路径: /etc/httpd/conf/httpd.conf
Ubuntu配置文件路径: /etc/apache2/apache2.conf



configure格式:
1.每行一个directive, 其值需要空格分隔

2.directive大小写不敏感, 值大小写敏感

3.以"#"开始的行, 为注释行

4.使用${<var>}格式可使用环境变量或Define directive定义的变量



环境变量类型:
1.shell环境变量
使用PassEnv导入到apache
PassEnv <shell_var>

2.apache内部环境变量
使用SetEnv设置变量
SetEnv <var> <val>



directive作用范围:
1.global scope

2.local scope
1)<Directory> - 作用于指定目录及子目录下(文件系统), 可使用wildcard

2)<DirectoryMatch> - 类似于<Directory>, 但匹配内容使用RE

3)<Files> - 作用于所有目录下的指定文件, 可使用wildcard

4)<FilesMatch> - 类似于<Files>, 但匹配内容使用RE

5)<Location> - 作用于指定目录及子目录下(web路径), 可使用wildcard

6)<LocationMatch> - 类似于<Location>, 但匹配内容使用RE

7)<VirtualHost> - 适用于多站点服务器的虚拟主机



directive列表: 
AccessFileName: 指定多站点的分布式配置文件名称. 名称默认为.htaccess

AllowOverride: 允许放置在分布式配置文件的directive类型,
该directive只能放置在<directory>范围中. 格式: AllowOverride
All|None|<directive_type>

Define: 定义新的变量并赋值. 格式: Define <var> <val>

DocumentRoot: 站点内容根目录. 虚拟主机需单独配置

ErrorLog: 日志文件位置. 虚拟主机需单独配置

Include: 包含的其他配置文件

Listen: http监听的接口(可选, IPv6使用[]限定)和端口

ServerRoot: 其他目录为非绝对目录时, 相对目录参考根目录



virtual host不同实现方式: 
1.基于域名: 使用多个域名、单个IP进行映射, 来实现虚拟多站点, 步骤如下: 
在DNS服务器上, 将多个域名映射到同一个IP

httpd.conf配置: 
<VirtualHost *: 80>
  ServerName www.dataforthompson.top
  ServerAlias dataforthompson.top
  DocumentRoot "/var/www/html/test"
</VirtualHost>

<VirtualHost *: 80>
  ServerName www.dataforthompson.cn
  ServerAlias dataforthompson.cn
  DocumentRoot "/var/www/html/product"
</VirtualHost>


2.基于IP: 使用多个IP: 端口组合来实现虚拟主机, 不常用


目录URL返回类型: 
1.默认文件(mod_dir)
DirectoryIndex  FILE_NAME1, FILE_NAME2…

2.文件列表(mod_autoindex)
Options Indexes


内容协商的服务器驱动配置: 
1.配置/etc/httpd/conf/httpd.conf: 
  [root@li1680-196 ~]# vi /etc/httpd/conf/httpd.conf
  #type-map文件后缀名
  AddHandler type-map .var
  #打开multiviews
  Options MultiViews
  #配置MultiviewsMatch
  MultiviewsMatch handlers

2.type-map文件配置(type-map文件名与请求资源同名): 
[root@li1680-196 ~]# vi index.html.var
  URI: index.html

  URI: index.en.html
  Content-Type: text/html
  Content-language: en,qs=1.0
  URI: index.fr.html
  Content-Type: text/html
  Content-language: fr,qs=0.8

mod_negotiation链接: http: //httpd.apache.org/docs/current/mod/mod_negotiation.html#typemaps

