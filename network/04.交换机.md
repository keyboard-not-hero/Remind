```
交换机
通过接收和转发数据帧, 使其达到目标设备, 作用于数据链路层. 特性如下:
    1.通过frame的源mac地址进行学习
    2.通过frame的目标mac地址确定转发接口
    3.使用STP创建无循环的链路
```
<br>
<br>


`Ethernet帧:`  
![image_not_found](pic/ethernet_frame.jpg)  
```
Preamble: 7 bytes, 用于防止帧内容丢失. 内容: 10101010 ... 10101010

SFD: 1 byte, 代表Preamble结束, 并且标志后续内容为帧内容起始. 内容: 10101011

Target mac: 6 bytes, 帧接收设备的mac地址, 前3 bytes由IEEE赋予厂商, 后3 bytes由厂商进行编号

Source mac: 6 bytes, 帧发送设备的mac地址

Type: 2 bytes, 数值=<1500时, 代表负载内容的长度; 数值>=1536时, 用于标记data在TCP/IP协议栈第三层协议的封装类型. 常见类型列表:
    0x0800    IPv4
    0x0806    ARP
    0x86DD    IPv6

Data: 46~1500 bytes, 由TCP/IP协议栈上层传递下来的内容

FCS: 4 bytes, 全称为Frame Check Sequence, 使用CRC算法在发送端对目标mac/源mac/type/data进行校验


LAN帧类型列表
1.Ethernet II(version 2)/DIX, 普遍使用的帧类型, type字段>=1536

2.Novell raw IEEE802.3, type字段<=1500, data起始两字节为0XFFFF

3.IEEE802.2 LLC, type字段=<1500

4.IEEEE 802.2 SNAP, type字段=<1500, data开始两字节为0XAAAA
```
<br>
<br>


`Cisco HDLC帧`  
![image_not_found](pic/cHDLC_frame.jpg)  
```
Flag: 1 byte, 代表后面为帧的开始. 值为0x7E

Address: 1 byte, 指定单播或多播. 0x0F为单播, 0x8F为多播

Control: 1 byte, 保留为0x00

Protocol: 2 bytes, 上层协议类型. 常见类型列表:
    0x0800    IPv4
    0x8035    ARP

Information Field: 0~9k bytes, TCP/IP栈上层传下来的内容

FCS: 2 bytes/4 bytes, 使用CRC进行校验


WAN(Wide Area Network)类型
1.HDLC(Hight-level Data link Control)
物理层
    leased line, 其他名称serial line/point-to-point line/private line

数据链路层
    HDLC


2.EoMPLS(Ethernet over Multiprotocol Label Switching)
物理层
    ethernet line

数据链路层
    EoMPLS
```    
<br>
<br>


![image not found](pic/mode_switch.jpg)

```
一、从console/vty进入EXEC mode



二、从EXEC mode进入Privileged mode
> enable

实例1 - 查看运行配置文件
# show running-config

实例2 - 查看启动配置文件
# show startup-config

实例3 - 将运行配置文件拷贝到启动配置文件
# copy running-config startup-config

实例4 - 将启动配置文件拷贝到运行配置文件
# copy startup-config running-config

实例5 - 删除启动配置文件
# erase startup-config
or
# erase nvram:
or  
# write erase

实例6 - 重启设备
# reload

实例7 - 取匹配正则表达式的行
# show running-config | include <regular-expression>

实例8 - 筛除符合匹配正则表达式的行
# show running-config | exclude <regular-expression>

实例9 - 取第一个匹配正则表达式的行, 以及该行之后的行
# show running-config | begin <regular-expression>



三、从Privileged mode进入global configure mode
# configure terminal

实例1 - 主机名配置
(config)# hostname steven

实例2 - banner配置
1)exec banner
在用户exec模式之前显示消息
(config)# banner exec <beg_delimiter> <prompt_message> <end_delimiter>

2)login banner
给需要登录的终端显示消息
(config)# banner login <beg_delimiter> <prompt_message> <end_delimiter>

3)motd(message of the day) banner
给通过telnet/AUX/console连接的人显示消息
(config)# banner motd <beg_delimiter> <prompt_message> <end_delimiter>

实例3 - 启动/关闭console logging(vty不会有logging输出)
(config)# [no] logging console

实例4 - 是否使用domain-lookup特性(输入错误指令时, 将错误指令视为域名, 使用telnet连接)
(config)# [no] ip domain-lookup

实例5 - enable密码配置
(config)# enable secret <passwd>

** 补充: 在全局配置(接口配置等)模式下使用show指令
(config)# do show ...



四、从global configure模式进入其他子配置模式
** 备注: 使用end或ctrl+z可以从子配置模式直接退出到privileged模式
1.进入line console配置模式
(config)# line console 0

实例1 - 设置history大小
(config)# line console 0
(config-line)# history size <num>

显示history列表
# show history

实例2 - logging消息是否同步(同步不覆盖输入)
(config-line)# [no] logging synchronous

实例3 - 设置console超时断连时间
(config-line)# exec-timeout <mins> <secs>

关闭断连时间限制
(config-line)# exec-timeout 0

2.进入line vty配置模式
(config)# line vty 0 15

实例1 - 设置history大小
(config)# line vty 0 15
(config-line)# history size <num>

显示history列表
# show history

实例2 - 设置vty超时断连时间
(config-line)# exec-timeout <mins> <secs>

关闭断连时间限制
(config-line)# exec-timeout 0


3.进入interface配置模式
(config)# interface f0/1
(config)# interface range f0/1 - 10

实例1 - description配置
(config-if)# description <description>

实例2 - 启用/关闭接口
(config-if)# [no] shutdown

实例3 - 网络速度
(config-if)# speed {auto | 10 | 100 | 1000}

实例4 - 配置双工
(config-if)# duplex {auto | full | half}

实例5 - 配置auto - mdix
(config-if)# [no] mdix auto


自动协商机制(auto-negotiation)
802.3u特性, 链路两端自动交换网络速度和双工信息
描述:
1)当接口的网络速度或双工任意一项开启时, 接口开启自动协商

2)链路两端的其中一端接口开启自动协商, 配置协商的一端即可完成协商

3)链路两端必须全部开启自动协商, 才能完成双工的协商


情景适配(自动协商 - 双工)
当一端关闭自动协商, 另一端开启自动协商. 则开启协商的一端根据最低标准配置双工, 即10/100M配置half duplex, 1000M配置full duplex


介质相关接口自动转化(automatic medium-dependent interface crossover, auto-mdix)
在链路两端的任意一端开启该特性, 会在直连/交叉自动转换, 从而确保连线正常. 开启该特性前, 必须开启自动协商


4.进入vlan配置模式
(config)# vlan 1
```
<br>
<br>


```
配置console与telnet/SSH登录
实例1 - console登录密码
1)所有用户共享密码
(config)# line console <num>
(config-line)# password <passwd>
(config-line)# login

2)本地用户名/密码登录
(config)# username <user> secret <passwd>
(config)# line console 0
(config-line)# login local



实例2 - telnet登录密码
1)所有用户共享密码
(config)# line vty <num_1> <num_2>
(config-line)# password <passwd>
(config-line)# transport input telnet
(config-line)# login

2)本地用户名/密码登录
(config)# username <user> secret <passwd>
(config)# line vty <num_1> <num_2>
(config-line)# transport input telnet
(config-line)# login local


实例2 - SSH登录密码
(config)# hostname <host_name>
(config)# ip domain-name <domain_name>
(config)# crypto key generate rsa
(config)# username <user> secret <passwd>
(config)# ip ssh version 2
(config)# line vty <num_1> <num_2>
(config-line)# transport input ssh
(config-line)# login local

客户端ssh登录
# ssh -l <user> <server_add>

查看当前ssh服务器端信息
# show ip ssh

查看连接到当前服务器端的客户端的信息
# show ssh
```
<br>
<br>


```
MAC表
1.mac表完整内容(静态mac和动态mac)
显示mac表完整内容
# show mac address-table


2.动态mac表内容
1)显示动态mac表内容
# show mac address-table dynamic [interface <interface>] [address <add>] [vlan <vlan>]

2)删除动态mac表内容
# clear mac address-table dynamic [interface <interface>] [address <add>] [vlan <vlan>]


3.mac表age时间
1)显示mac表age时间
# show mac address-table aging-time

2)设置mac表age时间
(config)# mac address-table aging-time <seconds> [vlan <vlan>]


4.mac表内容汇总计数
# show mac address-table count
```
