![image_not_found](pic/gateway_protocol.jpg)<br>
名词列表:<br>
AS(Autonomous System)<br>
位于单个机构控制下的所有路由器集合<br>
AS内部使用IGP进行路由, AS之间使用EGP进行路由<br>
机构连接上Internet需要获得ASN(AS Number)<br>
ASN最初版本为16 bytes, RFC 4893拓展到4 bytes<br>
private ASN:<br>
&emsp;&emsp;2 bytes: 64,512 - 65,535<br>
&emsp;&emsp;4 bytes: 4,200,000,000 - 4,294,967,294
<br>
<br>

BGP(Border Gateway Protocol)<br>
BGP属于EGP(Exterior Gateway Protocol)<br>
BGP用于在AS之间进行通信<br>
BGP使用TCP作为传输层协议, 并且使用TCP 179端口<br>
位于AS边界的, 与其他AS通信的router, 称为BGP speaker<br>
不同AS之间的BGP speaker通信使用eBGP, 同一AS内的BGP speaker通信使用iBGP<br>
<br>
<br>

消息类型<br>
open message<br>

update message<br>

keeplive message<br>
用于维持与peer的连接, 只有消息头部(19 bytes), 默认发送间隔时间为holder time的1/3
<br>

notification message<br>
检测到错误, 发送错误, 然后立即关闭与peer的连接<br>
<br>
<br>
<br>

[1]IPv4 BGP(BGP-4): https://datatracker.ietf.org/doc/html/rfc4271

[2]IPv4 BGP usage: https://datatracker.ietf.org/doc/html/rfc1772

[3]BGP support for four-octet ASN: https://datatracker.ietf.org/doc/html/rfc4893

[4]IPv6 BGP: https://datatracker.ietf.org/doc/html/rfc4760
